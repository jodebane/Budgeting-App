import MySQLdb

####DATABASE CONNECTION
db=MySQLdb.connect(host="jodebane.mysql.pythonanywhere-services.com",
                   user="jodebane",
                   passwd="matad0rs",
                   db="jodebane$Budgeting",

                   )


def budgetkeyprint():
    print ("Budget Number, Budget Name, Type, Number of Weeks")


####Beginning Check

cursor = db.cursor()
def openingcheck():
    print ("budgets: ")
    r= cursor.execute("SELECT * FROM Budgets")
    print (r)

def createtable():
    cursor.execute("DROP TABLE Budgets")
    cursor.execute("CREATE TABLE Budgets(IDnum int, Name text, Type text, Weeks int)")



def checktableisthere():
    global truth
    global budgetid
    cursor.execute("SELECT * FROM Budgets")
    checkvar = cursor.fetchall()
    if len(checkvar) > 0:
        cursor.execute("SELECT * FROM Budgets")
        print("Number of budgets so far: ")
        budgetid = (len(list(cursor)))
        print(budgetid)
        truth = 1
        budgetid = (len(list(cursor)))
        return budgetid
        return truth
        return True
    truth = 0;
    budgetid = 0
    return budgetid
    return truth
    return False



def createfirstbudget(truth, budgetid):
    if truth == 0:
        budgetnum = 1
    elif truth == 1:
        budgetnum = budgetid+1
        print ("Enter a name for this budget:  ")
    budgetname = input("Enter a name    ")
    print ("press 1 for repeating, 2 for one-time  ")
    budgettype = int(input("1,  or 2 "))
    if budgettype == 1 or budgettype == 2:
        if budgettype == 1:
            budgettypetext = "repeating"
        elif budgettype == 2:
            budgettypetext = "one-time"
        print ("Enter a timespan for this budget by number of weeks. For instance, if it is a monthly budget, type '4'  ")
        budgettimespan = int(input("Enter a number of weeks  "))
        cursor.execute("INSERT INTO Budgets VALUES(%s, %s, %s, %s)", (budgetnum, budgetname, budgettypetext, budgettimespan))
        cursor.execute("SELECT * FROM Budgets")
        rows = cursor.fetchall()
        budgetkeyprint()
        print (rows)
        db.commit()
    else:
        print ("error. Please enter a correct number and try again")
        createfirstbudget(truth, budgetid)


def startingmenu():
    global truth
    global budgetid
    print ("To create a new budget, press 1. To manage an existing budget, press 2")
    startanswerint = int(input("Press 1 or 2 "))
    if startanswerint == 1:
        checktableisthere()
        createfirstbudget(truth, budgetid)
    elif startanswerint == 2:
        print("PLACEHOLDER")


startingmenu()
